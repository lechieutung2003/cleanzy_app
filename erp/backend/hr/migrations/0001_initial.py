# Generated by Django 5.0.4 on 2025-12-02 14:58

import django.db.models.deletion
import django.utils.timezone
import uuid
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('businesses', '0001_initial'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='ServiceType',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False, unique=True)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('name', models.CharField(max_length=100)),
                ('price_per_m2', models.IntegerField()),
                ('cleaning_rate_m2_per_h', models.IntegerField()),
                ('img', models.ImageField(blank=True, null=True, upload_to='service_types/')),
                ('star', models.DecimalField(decimal_places=1, default=0, max_digits=2)),
                ('about', models.TextField(blank=True, default='')),
            ],
            options={
                'db_table': 'hr_service_type',
            },
        ),
        migrations.CreateModel(
            name='Skill',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False, unique=True)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('name', models.CharField(max_length=100)),
            ],
            options={
                'db_table': 'hr_skill',
            },
        ),
        migrations.CreateModel(
            name='Smart_Pricing',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False, unique=True)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('service_type_id', models.IntegerField(default=1)),
                ('hours_peak', models.BooleanField(default=False)),
                ('customer_history_score', models.PositiveIntegerField(default=0)),
                ('area_m2', models.DecimalField(decimal_places=2, default=0, max_digits=7)),
                ('base_rate', models.DecimalField(decimal_places=2, default=0, max_digits=20)),
                ('proposed_price', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('price_adjustment', models.DecimalField(decimal_places=2, default=0, max_digits=5)),
                ('accepted_status', models.BooleanField(default=False)),
                ('reward', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
            ],
            options={
                'db_table': 'hr_smartpricing',
            },
        ),
        migrations.CreateModel(
            name='UnitType',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False, unique=True)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('name', models.CharField(max_length=255, null=True, unique=True)),
                ('description', models.TextField(blank=True, null=True)),
            ],
            options={
                'db_table': 'hr_organization_unit_types',
            },
        ),
        migrations.CreateModel(
            name='Customer',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False, unique=True)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('name', models.CharField(max_length=100)),
                ('phone', models.CharField(max_length=20)),
                ('email', models.EmailField(max_length=254)),
                ('password', models.CharField(max_length=128)),
                ('address', models.CharField(max_length=255)),
                ('history_order_score', models.IntegerField(blank=True, default=0, null=True)),
                ('area', models.CharField(choices=[('Hải Châu', 'Hải Châu'), ('Ngũ Hành Sơn', 'Ngũ Hành Sơn'), ('Liên Chiểu', 'Liên Chiểu'), ('Sơn Trà', 'Sơn Trà'), ('Cẩm Lệ', 'Cẩm Lệ'), ('Thanh Khê', 'Thanh Khê'), ('An Hải', 'An Hải'), ('An Khê', 'An Khê'), ('An Thắng', 'An Thắng'), ('Avương', 'Avương'), ('Bà Nà', 'Bà Nà'), ('Bàn Thạch', 'Bàn Thạch'), ('Bến Giằng', 'Bến Giằng'), ('Bến Hiên', 'Bến Hiên'), ('Chiên Đàn', 'Chiên Đàn'), ('Đắc Pring', 'Đắc Pring'), ('Đại Lộc', 'Đại Lộc'), ('Điện Bàn', 'Điện Bàn'), ('Điện Bàn Bắc', 'Điện Bàn Bắc'), ('Điện Bàn Đông', 'Điện Bàn Đông'), ('Điện Bàn Tây', 'Điện Bàn Tây'), ('Đồng Dương', 'Đồng Dương'), ('Đông Giang', 'Đông Giang'), ('Đức Phú', 'Đức Phú'), ('Duy Nghĩa', 'Duy Nghĩa'), ('Duy Xuyên', 'Duy Xuyên'), ('Gò Nổi', 'Gò Nổi'), ('Hà Nha', 'Hà Nha'), ('Hải Vân', 'Hải Vân'), ('Hiệp Đức', 'Hiệp Đức'), ('Hòa Cường', 'Hòa Cường'), ('Hòa Khánh', 'Hòa Khánh'), ('Hòa Tiến', 'Hòa Tiến'), ('Hòa Vang', 'Hòa Vang'), ('Hòa Xuân', 'Hòa Xuân'), ('Hoàng Sa', 'Hoàng Sa'), ('Hội An', 'Hội An'), ('Hội An Đông', 'Hội An Đông'), ('Hội An Tây', 'Hội An Tây'), ('Hùng Sơn', 'Hùng Sơn'), ('Hương Trà', 'Hương Trà'), ('Khâm Đức', 'Khâm Đức'), ('La Dêê', 'La Dêê'), ('La Êê', 'La Êê'), ('Lãnh Ngọc', 'Lãnh Ngọc'), ('Nam Giang', 'Nam Giang'), ('Nam Phước', 'Nam Phước'), ('Nam Trà My', 'Nam Trà My'), ('Nông Sơn', 'Nông Sơn'), ('Núi Thành', 'Núi Thành'), ('Phú Ninh', 'Phú Ninh'), ('Phú Thuận', 'Phú Thuận'), ('Phước Chánh', 'Phước Chánh'), ('Phước Hiệp', 'Phước Hiệp'), ('Phước Năng', 'Phước Năng'), ('Phước Thành', 'Phước Thành'), ('Phước Trà', 'Phước Trà'), ('Quảng Phú', 'Quảng Phú'), ('Quế Phước', 'Quế Phước'), ('Quế Sơn', 'Quế Sơn'), ('Quế Sơn Trung', 'Quế Sơn Trung'), ('Sơn Cẩm Hà', 'Sơn Cẩm Hà'), ('Sông Kôn', 'Sông Kôn'), ('Sông Vàng', 'Sông Vàng'), ('Tam Anh', 'Tam Anh'), ('Tam Hải', 'Tam Hải'), ('Tam Kỳ', 'Tam Kỳ'), ('Tam Mỹ', 'Tam Mỹ'), ('Tam Xuân', 'Tam Xuân'), ('Tân Hiệp', 'Tân Hiệp'), ('Tây Giang', 'Tây Giang'), ('Tây Hồ', 'Tây Hồ'), ('Thăng An', 'Thăng An'), ('Thăng Bình', 'Thăng Bình'), ('Thăng Điền', 'Thăng Điền'), ('Thăng Phú', 'Thăng Phú'), ('Thăng Trường', 'Thăng Trường'), ('Thạnh Bình', 'Thạnh Bình'), ('Thạnh Mỹ', 'Thạnh Mỹ'), ('Thu Bồn', 'Thu Bồn'), ('Thượng Đức', 'Thượng Đức'), ('Tiên Phước', 'Tiên Phước'), ('Trà Đốc', 'Trà Đốc'), ('Trà Giáp', 'Trà Giáp'), ('Trà Leng', 'Trà Leng'), ('Trà Liên', 'Trà Liên'), ('Trà Linh', 'Trà Linh'), ('Trà My', 'Trà My'), ('Trà Tân', 'Trà Tân'), ('Trà Tập', 'Trà Tập'), ('Trà Vân', 'Trà Vân'), ('Việt An', 'Việt An'), ('Vu Gia', 'Vu Gia'), ('Xuân Phú', 'Xuân Phú')], max_length=50)),
                ('user', models.OneToOneField(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='hr_customer', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'hr_customer',
            },
        ),
        migrations.CreateModel(
            name='Group',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False, unique=True)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('name', models.CharField(blank=True, max_length=50, null=True)),
                ('email', models.CharField(blank=True, max_length=255, null=True)),
                ('manager', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='managed_groups', to='businesses.employee')),
                ('parent', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='groups', to='hr.group')),
            ],
            options={
                'db_table': 'hr_groups',
            },
        ),
        migrations.CreateModel(
            name='Office',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False, unique=True)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('name', models.CharField(blank=True, max_length=50, null=True)),
                ('remain_leaves_period', models.IntegerField(default=6)),
                ('established_date', models.DateField(blank=True, null=True)),
                ('email', models.CharField(blank=True, max_length=50, null=True)),
                ('phone', models.CharField(blank=True, max_length=15, null=True)),
                ('address', models.CharField(blank=True, max_length=255, null=True)),
                ('group', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='offices', to='hr.group')),
                ('manager', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='managed_offices', to='businesses.employee')),
            ],
            options={
                'db_table': 'hr_offices',
            },
        ),
        migrations.CreateModel(
            name='Holiday',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False, unique=True)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('start_date', models.DateField(null=True)),
                ('end_date', models.DateField(null=True)),
                ('title', models.CharField(max_length=255, null=True)),
                ('descriptions', models.TextField(blank=True, null=True)),
                ('repeat', models.BooleanField(default=False)),
                ('start_year', models.IntegerField(null=True)),
                ('end_year', models.IntegerField(null=True)),
                ('count', models.IntegerField(default=0, null=True)),
                ('office', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='holidays', to='hr.office')),
            ],
            options={
                'db_table': 'hr_office_holidays',
            },
        ),
        migrations.CreateModel(
            name='Order',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False, unique=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('area_m2', models.DecimalField(decimal_places=2, max_digits=10)),
                ('requested_hours', models.DecimalField(decimal_places=2, max_digits=5)),
                ('preferred_start_time', models.DateTimeField()),
                ('preferred_end_time', models.DateTimeField()),
                ('estimated_hours', models.DecimalField(decimal_places=2, max_digits=5)),
                ('cost_confirm', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True)),
                ('status', models.CharField(choices=[('PENDING', 'Chờ xử lý'), ('PENDING_PAYMENT', 'Chờ thanh toán'), ('PAID', 'Đã thanh toán'), ('CONFIRMED', 'Đã xác nhận'), ('IN_PROGRESS', 'Đang thực hiện'), ('COMPLETED', 'Hoàn thành'), ('CANCELLED', 'Đã hủy'), ('REJECTED', 'Từ chối'), ('REFUND', 'Hoàn tiền')], db_index=True, default='PENDING', max_length=20)),
                ('note', models.TextField(blank=True, null=True)),
                ('customer_feedback', models.TextField(blank=True, help_text='Phản hồi của khách hàng sau khi hoàn thành dịch vụ', null=True)),
                ('admin_log', models.TextField(blank=True, help_text='Ghi chú của admin về đơn hàng', null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('customer', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='orders', to='hr.customer')),
                ('service_type', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='orders', to='hr.servicetype')),
            ],
            options={
                'db_table': 'hr_order',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='DecisionLog',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False, unique=True)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('availability_score', models.DecimalField(decimal_places=2, max_digits=5)),
                ('skill_score', models.DecimalField(decimal_places=2, max_digits=5)),
                ('cost_score', models.DecimalField(decimal_places=2, max_digits=5)),
                ('workload_score', models.DecimalField(decimal_places=2, max_digits=5)),
                ('total_score', models.DecimalField(decimal_places=2, max_digits=5)),
                ('computed_at', models.DateTimeField(auto_now_add=True)),
                ('notes', models.TextField(blank=True, null=True)),
                ('employee', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='businesses.employee')),
                ('order', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='hr.order')),
            ],
            options={
                'db_table': 'hr_decision_log',
            },
        ),
        migrations.CreateModel(
            name='Assignment',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False, unique=True)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('assigned_time', models.DateTimeField()),
                ('status', models.CharField(max_length=20)),
                ('work_hours', models.DecimalField(decimal_places=2, max_digits=5)),
                ('cost', models.DecimalField(decimal_places=2, max_digits=10)),
                ('employee', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='businesses.employee')),
                ('order', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='hr.order')),
            ],
            options={
                'db_table': 'hr_assignment',
            },
        ),
        migrations.CreateModel(
            name='Favorite',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False, unique=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('service_name', models.CharField(max_length=200)),
                ('price_per_m2', models.IntegerField(blank=True, null=True)),
                ('img', models.ImageField(blank=True, null=True, upload_to='service_types/')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('customer', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='favorites', to='hr.customer')),
                ('service_type', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='hr.servicetype')),
            ],
            options={
                'db_table': 'hr_favorite',
            },
        ),
        migrations.CreateModel(
            name='EmployeeSkill',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False, unique=True)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('employee', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='businesses.employee')),
                ('skill', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='hr.skill')),
            ],
            options={
                'db_table': 'hr_employee_skill',
            },
        ),
        migrations.CreateModel(
            name='Title',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False, unique=True)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('title', models.CharField(max_length=80, unique=True)),
                ('employees', models.ManyToManyField(blank=True, null=True, related_name='titles', to='businesses.employee')),
            ],
            options={
                'db_table': 'hr_titles',
            },
        ),
        migrations.CreateModel(
            name='Unit',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False, unique=True)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('name', models.CharField(max_length=255)),
                ('email', models.EmailField(blank=True, max_length=255, null=True)),
                ('slack_channel', models.CharField(blank=True, max_length=255, null=True)),
                ('manager', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='managed_units', to='businesses.employee')),
                ('parent', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='units', to='hr.unit')),
            ],
            options={
                'db_table': 'hr_organization_units',
            },
        ),
        migrations.CreateModel(
            name='UnitMember',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False, unique=True)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('employee', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='businesses.employee')),
                ('unit', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='hr.unit')),
            ],
            options={
                'db_table': 'hr_organization_unit_members',
            },
        ),
        migrations.AddField(
            model_name='unit',
            name='members',
            field=models.ManyToManyField(blank=True, null=True, related_name='units', through='hr.UnitMember', to='businesses.employee'),
        ),
        migrations.AddField(
            model_name='unit',
            name='type',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='units', to='hr.unittype'),
        ),
        migrations.CreateModel(
            name='WorkSession',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False, unique=True)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('start_time', models.TimeField()),
                ('end_time', models.TimeField()),
                ('work_day', models.IntegerField(blank=True, choices=[(0, 'Monday'), (1, 'Tuesday'), (2, 'Wednesday'), (3, 'Thursday'), (4, 'Friday'), (5, 'Saturday'), (6, 'Sunday')], default=0)),
                ('office', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='sessions', to='hr.office')),
            ],
            options={
                'db_table': 'hr_work_sessions',
            },
        ),
        migrations.AddIndex(
            model_name='order',
            index=models.Index(fields=['status', 'created_at'], name='hr_order_status_d517f6_idx'),
        ),
        migrations.AddIndex(
            model_name='order',
            index=models.Index(fields=['customer', 'status'], name='hr_order_custome_6377d2_idx'),
        ),
        migrations.AddIndex(
            model_name='order',
            index=models.Index(fields=['preferred_start_time'], name='hr_order_preferr_b36a81_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='favorite',
            unique_together={('customer', 'service_type')},
        ),
        migrations.AlterUniqueTogether(
            name='employeeskill',
            unique_together={('employee', 'skill')},
        ),
    ]
